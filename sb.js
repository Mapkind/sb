//console.log("Test");

//import { createClient } from './@supabase/supabase-js';

// Create a single supabase client for interacting with your database
//const supabase = createClient('https://bmqblboosmqzcfdwnopt.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJtcWJsYm9vc21xemNmZHdub3B0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE5MDA5NTcsImV4cCI6MjA1NzQ3Njk1N30.vqGikebf3d58yqgMHqvRiF8Dzno89XJpgGfeVZBBSZU')
//const supabase = "supabase";
//console.log("supabase: ", supabase);

//console.log('Supabase Instance: ', supabase)

import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
let supabase = createClient('https://bmqblboosmqzcfdwnopt.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJtcWJsYm9vc21xemNmZHdub3B0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE5MDA5NTcsImV4cCI6MjA1NzQ3Njk1N30.vqGikebf3d58yqgMHqvRiF8Dzno89XJpgGfeVZBBSZU')

console.log('Supabase Instance: ', supabase);

async function getMembers(){
    const { data, error } = await supabase
    .from('members')
    .select()
  
    console.log("members: ", data);
}

async function getFeatures(){
    const { data, error } = await supabase
    .from('features')
    .select()
  
    console.log("features: ", data);
}

getMembers();
getFeatures();


async function createFeature(){
    const { error } = await supabase
  .from('features')
  .insert({ memid: 'mem_2', name: 'Mordor', globalid: '555-555-555',  geom: '{"geometry":{"type":"MultiLineString","coordinates":[[[-149.277996,61.779584,944.3],[-149.277997,61.779577,947],[-149.278066,61.779563,946],[-149.278116,61.779574,946],[-149.278197,61.779609,947.3],[-149.278208,61.77952,947.5],[-149.278229,61.779485,946.7],[-149.278267,61.779284,943.5],[-149.278325,61.779067,941],[-149.27836,61.778809,938.4],[-149.278407,61.778619,936.8],[-149.278437,61.778449,935.6],[-149.278448,61.778292,934.1],[-149.278473,61.778121,932.3],[-149.278544,61.777929,930],[-149.278601,61.777838,928.6],[-149.278682,61.777734,927.1],[-149.279247,61.777171,920.5],[-149.279288,61.777086,920],[-149.279304,61.777006,918.9],[-149.279289,61.776928,918.1],[-149.27925,61.776859,917],[-149.279198,61.776797,916.1],[-149.278806,61.776419,909],[-149.279066,61.776378,911.1],[-149.279413,61.776422,913.2],[-149.279566,61.776428,914.9],[-149.279733,61.77642,916.5],[-149.279862,61.776346,917.8],[-149.279834,61.776299,918.1],[-149.279865,61.776139,919.2],[-149.279892,61.775909,921.2],[-149.27994,61.775832,922.3],[-149.279956,61.775745,922.7],[-149.280039,61.775569,924.6],[-149.280154,61.775392,925.3],[-149.280364,61.775146,926],[-149.280383,61.775064,926.7],[-149.280418,61.774985,927],[-149.280432,61.774908,928.1],[-149.280428,61.774818,928.8],[-149.280311,61.774534,931.6],[-149.280012,61.773941,936.6],[-149.280006,61.77385,937.1],[-149.279933,61.773695,938.6],[-149.279926,61.773633,939],[-149.279963,61.773575,939.8],[-149.280023,61.773526,940.6],[-149.280093,61.773497,941.1],[-149.280362,61.773547,943.6],[-149.280604,61.773619,946.2],[-149.280962,61.773745,950],[-149.281405,61.773923,953.7],[-149.281845,61.774123,958.5],[-149.282475,61.774388,965],[-149.283183,61.774393,969.7],[-149.283815,61.774368,974.5],[-149.284033,61.774368,976.7],[-149.284446,61.774343,980.3],[-149.285018,61.774277,984.8],[-149.286188,61.774071,992.4],[-149.288291,61.773602,1003.6],[-149.289336,61.773343,1009.8],[-149.289778,61.773247,1012.4],[-149.290713,61.773112,1018.8],[-149.292045,61.772968,1031.4],[-149.292471,61.7729,1035.5],[-149.29267,61.772854,1037.1],[-149.293212,61.772694,1041.9],[-149.293583,61.772613,1045.1],[-149.293897,61.772559,1047.2],[-149.29402,61.772516,1047.8],[-149.294129,61.772455,1048.5],[-149.294264,61.772298,1049.1],[-149.294458,61.772122,1050.7],[-149.294572,61.772035,1051.9],[-149.294712,61.771958,1053.8],[-149.294874,61.771885,1055.7],[-149.295251,61.771782,1058.7],[-149.295876,61.771678,1064.6],[-149.296073,61.771631,1066.5],[-149.296618,61.771438,1070],[-149.296814,61.77139,1071.3],[-149.297022,61.771356,1073.2],[-149.297229,61.771338,1074.8],[-149.297438,61.771336,1076.9],[-149.297638,61.771347,1078.6],[-149.300296,61.771647,1098.2],[-149.301063,61.771719,1104.8],[-149.30146,61.771716,1107.8],[-149.302171,61.771669,1111.4],[-149.302434,61.771643,1113],[-149.302537,61.771606,1113.9],[-149.302694,61.771513,1115.4],[-149.302799,61.771488,1119.8],[-149.302908,61.771495,1120.2],[-149.303054,61.77159,1120.4],[-149.303176,61.771633,1121],[-149.303881,61.771614,1122.4],[-149.304994,61.771554,1127.3],[-149.305669,61.771466,1132.4],[-149.30607,61.771399,1135.2],[-149.306624,61.771342,1139.5],[-149.306923,61.77128,1141.9],[-149.308036,61.770912,1148.9],[-149.308187,61.77087,1150.3]]]},"source":"Data_Source"}'})

  if(!error){
    console.log("Feature created");
    getFeatures();
  }
  else{
    console.log("error: ", error);
  }
}

var featurebutton = document.getElementById("featurebutton");

featurebutton.addEventListener("click", createFeature);


